(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-914dc9aa"],{"0b42":function(t,e,c){var n=c("da84"),a=c("e8b5"),o=c("68ee"),i=c("861d"),r=c("b622"),d=r("species"),u=n.Array;t.exports=function(t){var e;return a(t)&&(e=t.constructor,o(e)&&(e===u||a(e.prototype))?e=void 0:i(e)&&(e=e[d],null===e&&(e=void 0))),void 0===e?u:e}},"1dde":function(t,e,c){var n=c("d039"),a=c("b622"),o=c("2d00"),i=a("species");t.exports=function(t){return o>=51||!n((function(){var e=[],c=e.constructor={};return c[i]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},"65f0":function(t,e,c){var n=c("0b42");t.exports=function(t,e){return new(n(t))(0===e?0:e)}},8418:function(t,e,c){"use strict";var n=c("a04b"),a=c("9bf2"),o=c("5c6c");t.exports=function(t,e,c){var i=n(e);i in t?a.f(t,i,o(0,c)):t[i]=c}},"99af":function(t,e,c){"use strict";var n=c("23e7"),a=c("da84"),o=c("d039"),i=c("e8b5"),r=c("861d"),d=c("7b0b"),u=c("07fa"),s=c("8418"),l=c("65f0"),b=c("1dde"),g=c("b622"),p=c("2d00"),h=g("isConcatSpreadable"),j=9007199254740991,O="Maximum allowed index exceeded",f=a.TypeError,v=p>=51||!o((function(){var t=[];return t[h]=!1,t.concat()[0]!==t})),y=b("concat"),C=function(t){if(!r(t))return!1;var e=t[h];return void 0!==e?!!e:i(t)},m=!v||!y;n({target:"Array",proto:!0,forced:m},{concat:function(t){var e,c,n,a,o,i=d(this),r=l(i,0),b=0;for(e=-1,n=arguments.length;e<n;e++)if(o=-1===e?i:arguments[e],C(o)){if(a=u(o),b+a>j)throw f(O);for(c=0;c<a;c++,b++)c in o&&s(r,b,o[c])}else{if(b>=j)throw f(O);s(r,b++,o)}return r.length=b,r}})},cc55:function(t,e,c){"use strict";c.r(e);var n=c("7a23"),a=Object(n["g"])("h2",null,"購物車",-1),o={class:"container"},i={class:"mt-4"},r={class:"table align-middle"},d=Object(n["g"])("thead",null,[Object(n["g"])("tr",null,[Object(n["g"])("th",null,"圖片"),Object(n["g"])("th",null,"商品名稱"),Object(n["g"])("th",null,"價格"),Object(n["g"])("th")])],-1),u={style:{width:"200px"}},s={class:"h5"},l={class:"h6"},b={class:"h5"},g={class:"btn-group btn-group-sm"},p=["onClick","disabled"],h=["onClick","disabled"],j={key:0,class:"fas fa-spinner fa-pulse"},O=Object(n["i"])(" 加到購物車 "),f={class:"text-end"},v=["disabled"],y={class:"table align-middle"},C=Object(n["g"])("thead",null,[Object(n["g"])("tr",null,[Object(n["g"])("th"),Object(n["g"])("th",null,"品名"),Object(n["g"])("th",{style:{width:"150px"}},"數量/單位"),Object(n["g"])("th",null,"單價")])],-1),m=["onClick"],x={key:0,class:"fas fa-spinner fa-pulse"},k=Object(n["i"])(" x "),w={class:"input-group input-group-sm"},L={class:"input-group mb-3"},A=["onUpdate:modelValue","onChange"],$={class:"input-group-text",id:"basic-addon2"},D={class:"text-end"},q=Object(n["g"])("td",{colspan:"3",class:"text-end"},"總計",-1),M={class:"text-end"};function z(t,e,c,z,I,P){return Object(n["t"])(),Object(n["f"])(n["a"],null,[a,Object(n["g"])("div",o,[Object(n["g"])("div",i,[Object(n["g"])("table",r,[d,Object(n["g"])("tbody",null,[(Object(n["t"])(!0),Object(n["f"])(n["a"],null,Object(n["z"])(I.products,(function(e){return Object(n["t"])(),Object(n["f"])("tr",{key:e.id},[Object(n["g"])("td",u,[Object(n["g"])("div",{style:Object(n["p"])([{backgroundImage:"url(".concat(e.imageUrl,")")},{height:"100px","background-size":"cover","background-position":"center"}])},null,4)]),Object(n["g"])("td",null,Object(n["C"])(e.title),1),Object(n["g"])("td",null,[Object(n["g"])("div",s,Object(n["C"])(e.price)+" 元",1),Object(n["g"])("del",l,"原價 "+Object(n["C"])(e.origin_price)+" 元",1),Object(n["g"])("div",b,"現在只要 "+Object(n["C"])(e.price)+" 元",1)]),Object(n["g"])("td",null,[Object(n["g"])("div",g,[Object(n["g"])("button",{type:"button",class:"btn btn-outline-secondary",onClick:function(c){return t.openProductModal(e.id)},disabled:I.isLoading===e.id}," 查看更多 ",8,p),Object(n["g"])("button",{type:"button",class:"btn btn-outline-danger",onClick:function(t){return P.addCart(e.id)},disabled:I.isLoading===e.id},[I.isLoading===e.id?(Object(n["t"])(),Object(n["f"])("i",j)):Object(n["e"])("",!0),O],8,h)])])])})),128))])]),Object(n["g"])("div",f,[Object(n["g"])("button",{class:"btn btn-outline-danger",type:"button",onClick:e[0]||(e[0]=function(){return P.removeAllCart&&P.removeAllCart.apply(P,arguments)}),disabled:0===I.cartData.carts.length},"清空購物車",8,v)]),Object(n["g"])("table",y,[C,Object(n["g"])("tbody",null,[I.cartData.carts?(Object(n["t"])(!0),Object(n["f"])(n["a"],{key:0},Object(n["z"])(I.cartData.carts,(function(t){return Object(n["t"])(),Object(n["f"])("tr",{key:t.id},[Object(n["g"])("td",null,[Object(n["g"])("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:function(e){return P.removeCart(t.id)}},[I.isLoading===t.id?(Object(n["t"])(),Object(n["f"])("i",x)):Object(n["e"])("",!0),k],8,m)]),Object(n["g"])("td",null,Object(n["C"])(t.product.title),1),Object(n["g"])("td",null,[Object(n["g"])("div",w,[Object(n["g"])("div",L,[Object(n["I"])(Object(n["g"])("input",{min:"1",type:"number",class:"form-control","onUpdate:modelValue":function(e){return t.qty=e},onChange:function(e){return P.updateCart(t)}},null,40,A),[[n["F"],t.qty,void 0,{number:!0}]]),Object(n["g"])("span",$,Object(n["C"])(t.product.unit),1)])])]),Object(n["g"])("td",D,Object(n["C"])(t.total),1)])})),128)):Object(n["e"])("",!0)]),Object(n["g"])("tfoot",null,[Object(n["g"])("tr",null,[q,Object(n["g"])("td",M,Object(n["C"])(I.cartData.total),1)])])])])])],64)}c("99af");var I={data:function(){return{cartData:{carts:[]},products:{},productId:"",isLoading:""}},methods:{getProducts:function(){var t=this;this.$http.get("".concat("https://vue3-course-api.hexschool.io/","v2/api/").concat("tedbirdy","/products/all")).then((function(e){t.products=e.data.products}))},getCart:function(){var t=this;this.$http.get("".concat("https://vue3-course-api.hexschool.io/","v2/api/").concat("tedbirdy","/cart")).then((function(e){t.cartData=e.data.data}))},addCart:function(t){var e=this,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n={product_id:t,qty:c};this.isLoading=t,this.$http.post("".concat("https://vue3-course-api.hexschool.io/","v2/api/").concat("tedbirdy","/cart"),{data:n}).then((function(){e.getCart(),e.isLoading="",e.$refs.productModal.closeModal()}))},removeCart:function(t){var e=this;this.isLoading=t,this.$http.delete("".concat("https://vue3-course-api.hexschool.io/","v2/api/").concat("tedbirdy","/cart/").concat(t)).then((function(){e.getCart(),e.isLoading=""}))},removeAllCart:function(){var t=this;this.$http.delete("".concat("https://vue3-course-api.hexschool.io/","v2/api/").concat("tedbirdy","/carts")).then((function(){t.getCart()}))},updateCart:function(t){var e=this,c={product_id:t.id,qty:t.qty};this.isLoading=t.id,this.$http.put("".concat("https://vue3-course-api.hexschool.io/","v2/api/").concat("tedbirdy","/cart/").concat(t.id),{data:c}).then((function(t){e.getCart(),e.isLoading=""}))}},mounted:function(){this.getProducts(),this.getCart()}},P=c("6b0d"),U=c.n(P);const _=U()(I,[["render",z]]);e["default"]=_},e8b5:function(t,e,c){var n=c("c6b6");t.exports=Array.isArray||function(t){return"Array"==n(t)}}}]);
//# sourceMappingURL=chunk-914dc9aa.51d577d3.js.map